/**
 * 
 */
package com.rabobank.com.rabobank.service.impl;

import java.util.ArrayList;
import java.util.Collections;
import java.util.Comparator;
import java.util.List;
import java.util.Map;
import java.util.Objects;
import java.util.Set;
import java.util.TreeSet;
import java.util.concurrent.ConcurrentHashMap;
import java.util.function.Function;
import java.util.function.Predicate;
import java.util.stream.Collectors;

import org.springframework.stereotype.Service;

import com.rabobank.com.rabobank.model.InvalidRecords;
import com.rabobank.com.rabobank.model.Records;
import com.rabobank.com.rabobank.model.Records.Record;
import com.rabobank.com.rabobank.service.RaboBankValidationService;

/**
 * @author Sutirtha
 *
 */
@Service
public class RaboBankValidationServiceImpl implements RaboBankValidationService {

	/* (non-Javadoc)
	 * @see com.rabobank.com.rabobank.service.RaboBankValidationService#validateTransactionRecords(com.rabobank.com.rabobank.model.Records)
	 */
	@Override
	public List<InvalidRecords> validateTransactionRecords(Records records) {
		
		
		/*Set<Records.Record> recordList = records.getRecord().stream()
		.filter(i->Collections.frequency(records.getRecord(), i) > 1)
		.collect(Collectors.toSet());*/
		
		System.out.println(recordList.size());
		return null;
	}
	
	
	public  static List<Records.Record> removeDuplicates(final List<Records.Record> personList) {

	    return (List<Record>) personList.stream().collect(Collectors
	            .collectingAndThen(Collectors.toCollection(() -> new TreeSet<>(Comparator.comparing(
	            		RaboBankValidationServiceImpl::uniqueAttributes))),
	                    ArrayList::new));

	}

	 private static Integer uniqueAttributes(Records.Record record){

	    if(Objects.isNull(record)){
	        return 0;
	    }



	    return (record.getReference()) ;
	}
}
